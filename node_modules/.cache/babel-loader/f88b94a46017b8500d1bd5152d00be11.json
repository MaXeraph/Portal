{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\KaRjn\\\\Desktop\\\\CSC309\\\\team51\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\KaRjn\\\\Desktop\\\\CSC309\\\\team51\\\\src\\\\components\\\\CourseSearchBar.js\";\nimport { escapeRegExp } from \"lodash\";\nimport { motion } from \"framer-motion\";\nimport React, { useState, useEffect } from \"react\";\nimport { uid } from \"react-uid\";\nimport { useHistory } from \"react-router-dom\";\nimport useDebounce from \"../utils/useDebounce\";\n\nfunction SearchResults({\n  query,\n  results\n}) {\n  if (!results.length) {\n    return null;\n  }\n\n  const list = {\n    visible: {\n      opacity: 1,\n      transition: {\n        when: \"beforeChildren\",\n        staggerChildren: 0.05\n      }\n    },\n    hidden: {\n      opacity: 0,\n      transition: {\n        when: \"afterChildren\"\n      }\n    }\n  };\n  const item = {\n    visible: {\n      opacity: 1,\n      x: 0\n    },\n    hidden: {\n      opacity: 0,\n      x: 50\n    }\n  };\n  return React.createElement(motion.div, {\n    initial: \"hidden\",\n    animate: \"visible\",\n    variants: list,\n    className: \"w-full absolute mt-3 py-2 flex flex-col shadow-xl rounded-lg bg-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, results.slice(0, 3).map((result, index) => {\n    const parts = result.title.split(new RegExp(\"(\".concat(escapeRegExp(query), \")\"), \"gi\"));\n    return React.createElement(motion.li, {\n      variants: item,\n      className: \"text-base text-gray-400 font-bold px-3 py-2\",\n      key: uid(result, index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: result.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, parts.map((part, i) => React.createElement(\"span\", {\n      key: i,\n      className: part.toLowerCase() === query.toLowerCase() && \"text-gray-600\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, part))));\n  })));\n}\n\nfunction SearchInput({\n  onChange,\n  query,\n  shouldAutoFocus\n}) {\n  const history = useHistory();\n\n  const handleChange = e => {\n    onChange(e.target.value);\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    if (query) {\n      history.push(\"/search?q=\".concat(query));\n    }\n  };\n\n  return React.createElement(\"form\", {\n    className: \"flex shadow rounded-lg\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    autoFocus: shouldAutoFocus,\n    className: \"block text font-light text-gray-700 placeholder-gray-400 p-3 bg-white w-full rounded-l-lg\",\n    type: \"search\",\n    onChange: handleChange,\n    placeholder: \"Ex. CSC309, Introduction to Computer Networks\",\n    value: query,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"text font-medium uppercase text-white bg-blue-500 py-3 px-5 rounded-r-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Search\"));\n}\n\nfunction CourseSearchBar({\n  initialValue,\n  shouldAutoFocus\n}) {\n  const _useState = useState(initialValue),\n        _useState2 = _slicedToArray(_useState, 2),\n        query = _useState2[0],\n        setQuery = _useState2[1];\n\n  const debouncedQuery = useDebounce(query, 300);\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        results = _useState4[0],\n        setResults = _useState4[1];\n\n  useEffect(() => {\n    if (debouncedQuery) {\n      // Replace with real network request\n      setTimeout(() => {\n        const staticResults = [{\n          url: \"/course/csc309\",\n          title: \"CSC309 - Programming on the Web\"\n        }, {\n          url: \"/course/csc301\",\n          title: \"CSC301 - Introduction to Software Engineering\"\n        }, {\n          url: \"/course/csc300\",\n          title: \"CSC300 - Computers and Society\"\n        }];\n        setResults(staticResults);\n      }, 750);\n    } else {\n      setResults([]);\n    }\n  }, [debouncedQuery]);\n  return React.createElement(\"div\", {\n    className: \"relative\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(SearchInput, {\n    onChange: setQuery,\n    query: query,\n    shouldAutoFocus: shouldAutoFocus,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }), React.createElement(SearchResults, {\n    query: query,\n    results: results,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }));\n}\n\nexport default CourseSearchBar;","map":{"version":3,"sources":["C:/Users/KaRjn/Desktop/CSC309/team51/src/components/CourseSearchBar.js"],"names":["escapeRegExp","motion","React","useState","useEffect","uid","useHistory","useDebounce","SearchResults","query","results","length","list","visible","opacity","transition","when","staggerChildren","hidden","item","x","slice","map","result","index","parts","title","split","RegExp","url","part","i","toLowerCase","SearchInput","onChange","shouldAutoFocus","history","handleChange","e","target","value","handleSubmit","preventDefault","push","CourseSearchBar","initialValue","setQuery","debouncedQuery","setResults","setTimeout","staticResults"],"mappings":"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","sourcesContent":["import { escapeRegExp } from \"lodash\";\r\nimport { motion } from \"framer-motion\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { uid } from \"react-uid\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport useDebounce from \"../utils/useDebounce\";\r\n\r\nfunction SearchResults({ query, results }) {\r\n  if (!results.length) {\r\n    return null;\r\n  }\r\n\r\n  const list = {\r\n    visible: {\r\n      opacity: 1,\r\n      transition: {\r\n        when: \"beforeChildren\",\r\n        staggerChildren: 0.05\r\n      }\r\n    },\r\n    hidden: {\r\n      opacity: 0,\r\n      transition: {\r\n        when: \"afterChildren\"\r\n      }\r\n    }\r\n  };\r\n\r\n  const item = {\r\n    visible: { opacity: 1, x: 0 },\r\n    hidden: { opacity: 0, x: 50 }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial=\"hidden\"\r\n      animate=\"visible\"\r\n      variants={list}\r\n      className=\"w-full absolute mt-3 py-2 flex flex-col shadow-xl rounded-lg bg-white\"\r\n    >\r\n      <ul>\r\n        {results.slice(0, 3).map((result, index) => {\r\n          const parts = result.title.split(\r\n            new RegExp(`(${escapeRegExp(query)})`, \"gi\")\r\n          );\r\n          return (\r\n            <motion.li\r\n              variants={item}\r\n              className=\"text-base text-gray-400 font-bold px-3 py-2\"\r\n              key={uid(result, index)}\r\n            >\r\n              <a href={result.url}>\r\n                {parts.map((part, i) => (\r\n                  <span\r\n                    key={i}\r\n                    className={\r\n                      part.toLowerCase() === query.toLowerCase() &&\r\n                      \"text-gray-600\"\r\n                    }\r\n                  >\r\n                    {part}\r\n                  </span>\r\n                ))}\r\n              </a>\r\n            </motion.li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nfunction SearchInput({ onChange, query, shouldAutoFocus }) {\r\n  const history = useHistory();\r\n  const handleChange = e => {\r\n    onChange(e.target.value);\r\n  };\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n    if (query) {\r\n      history.push(`/search?q=${query}`);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"flex shadow rounded-lg\" onSubmit={handleSubmit}>\r\n      <input\r\n        autoFocus={shouldAutoFocus}\r\n        className=\"block text font-light text-gray-700 placeholder-gray-400 p-3 bg-white w-full rounded-l-lg\"\r\n        type=\"search\"\r\n        onChange={handleChange}\r\n        placeholder=\"Ex. CSC309, Introduction to Computer Networks\"\r\n        value={query}\r\n      />\r\n      <button className=\"text font-medium uppercase text-white bg-blue-500 py-3 px-5 rounded-r-lg\">\r\n        Search\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction CourseSearchBar({ initialValue, shouldAutoFocus }) {\r\n  const [query, setQuery] = useState(initialValue);\r\n  const debouncedQuery = useDebounce(query, 300);\r\n  const [results, setResults] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (debouncedQuery) {\r\n      // Replace with real network request\r\n      setTimeout(() => {\r\n        const staticResults = [\r\n          { url: \"/course/csc309\", title: \"CSC309 - Programming on the Web\" },\r\n          {\r\n            url: \"/course/csc301\",\r\n            title: \"CSC301 - Introduction to Software Engineering\"\r\n          },\r\n          { url: \"/course/csc300\", title: \"CSC300 - Computers and Society\" }\r\n        ];\r\n        setResults(staticResults);\r\n      }, 750);\r\n    } else {\r\n      setResults([]);\r\n    }\r\n  }, [debouncedQuery]);\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <SearchInput\r\n        onChange={setQuery}\r\n        query={query}\r\n        shouldAutoFocus={shouldAutoFocus}\r\n      />\r\n      <SearchResults query={query} results={results} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CourseSearchBar;\r\n"]},"metadata":{},"sourceType":"module"}