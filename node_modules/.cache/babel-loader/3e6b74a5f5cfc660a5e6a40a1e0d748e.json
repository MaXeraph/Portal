{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\KaRjn\\\\Desktop\\\\CSC309\\\\team51\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\KaRjn\\\\Desktop\\\\CSC309\\\\team51\\\\src\\\\context\\\\AuthContext.js\";\nimport PropTypes from \"prop-types\";\nimport React, { createContext, useEffect, useState } from \"react\";\nconst Context = createContext();\n\nfunction AuthProvider({\n  children = null\n}) {\n  const defaultState = {\n    isLoggedIn: false,\n    userId: null,\n    role: null\n  };\n  const prevAuth = localStorage.getItem(\"auth\");\n  const parsedAuth = JSON.parse(prevAuth) || defaultState;\n\n  const _useState = useState(parsedAuth),\n        _useState2 = _slicedToArray(_useState, 2),\n        auth = _useState2[0],\n        setAuth = _useState2[1];\n\n  useEffect(() => {\n    localStorage.setItem(\"auth\", JSON.stringify(auth));\n  }, [auth]);\n\n  function logout() {\n    setAuth(defaultState);\n  }\n\n  const defaultContext = {\n    auth,\n    logout,\n    setAuth\n  };\n  return React.createElement(Context.Provider, {\n    value: defaultContext,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26\n    },\n    __self: this\n  }, children);\n}\n\nAuthProvider.propTypes = {\n  children: PropTypes.node\n};\nexport { AuthProvider };\nexport default Context;","map":{"version":3,"sources":["C:/Users/KaRjn/Desktop/CSC309/team51/src/context/AuthContext.js"],"names":["PropTypes","React","createContext","useEffect","useState","Context","AuthProvider","children","defaultState","isLoggedIn","userId","role","prevAuth","localStorage","getItem","parsedAuth","JSON","parse","auth","setAuth","setItem","stringify","logout","defaultContext","propTypes","node"],"mappings":";;AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,IAAgBC,aAAhB,EAA+BC,SAA/B,EAA0CC,QAA1C,QAA0D,OAA1D;AAEA,MAAMC,OAAO,GAAGH,aAAa,EAA7B;;AAEA,SAASI,YAAT,CAAsB;AAAEC,EAAAA,QAAQ,GAAG;AAAb,CAAtB,EAA2C;AACzC,QAAMC,YAAY,GAAG;AAAEC,IAAAA,UAAU,EAAE,KAAd;AAAqBC,IAAAA,MAAM,EAAE,IAA7B;AAAmCC,IAAAA,IAAI,EAAE;AAAzC,GAArB;AACA,QAAMC,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAjB;AACA,QAAMC,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWL,QAAX,KAAwBJ,YAA3C;;AAHyC,oBAIjBJ,QAAQ,CAACW,UAAD,CAJS;AAAA;AAAA,QAIlCG,IAJkC;AAAA,QAI5BC,OAJ4B;;AAMzChB,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,YAAY,CAACO,OAAb,CAAqB,MAArB,EAA6BJ,IAAI,CAACK,SAAL,CAAeH,IAAf,CAA7B;AACD,GAFQ,EAEN,CAACA,IAAD,CAFM,CAAT;;AAIA,WAASI,MAAT,GAAkB;AAChBH,IAAAA,OAAO,CAACX,YAAD,CAAP;AACD;;AAED,QAAMe,cAAc,GAAG;AACrBL,IAAAA,IADqB;AAErBI,IAAAA,MAFqB;AAGrBH,IAAAA;AAHqB,GAAvB;AAMA,SAAO,oBAAC,OAAD,CAAS,QAAT;AAAkB,IAAA,KAAK,EAAEI,cAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA0ChB,QAA1C,CAAP;AACD;;AAEDD,YAAY,CAACkB,SAAb,GAAyB;AACvBjB,EAAAA,QAAQ,EAAEP,SAAS,CAACyB;AADG,CAAzB;AAIA,SAASnB,YAAT;AACA,eAAeD,OAAf","sourcesContent":["import PropTypes from \"prop-types\";\r\nimport React, { createContext, useEffect, useState } from \"react\";\r\n\r\nconst Context = createContext();\r\n\r\nfunction AuthProvider({ children = null }) {\r\n  const defaultState = { isLoggedIn: false, userId: null, role: null };\r\n  const prevAuth = localStorage.getItem(\"auth\");\r\n  const parsedAuth = JSON.parse(prevAuth) || defaultState;\r\n  const [auth, setAuth] = useState(parsedAuth);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"auth\", JSON.stringify(auth));\r\n  }, [auth]);\r\n\r\n  function logout() {\r\n    setAuth(defaultState);\r\n  }\r\n\r\n  const defaultContext = {\r\n    auth,\r\n    logout,\r\n    setAuth\r\n  };\r\n\r\n  return <Context.Provider value={defaultContext}>{children}</Context.Provider>;\r\n}\r\n\r\nAuthProvider.propTypes = {\r\n  children: PropTypes.node\r\n};\r\n\r\nexport { AuthProvider };\r\nexport default Context;\r\n"]},"metadata":{},"sourceType":"module"}