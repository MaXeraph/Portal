{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\KaRjn\\\\Desktop\\\\CSC309\\\\team51\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\KaRjn\\\\Desktop\\\\CSC309\\\\team51\\\\frontend\\\\src\\\\components\\\\CourseSearchBar.js\";\nimport PropTypes from \"prop-types\";\nimport { escapeRegExp } from \"lodash\";\nimport { Link } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { uid } from \"react-uid\";\nimport { useHistory } from \"react-router-dom\";\nimport useDebounce from \"../utils/useDebounce\";\nimport useOnClickOutside from \"../utils/useOnClickOutside\";\n\nfunction SearchResults({\n  query,\n  results,\n  visible\n}) {\n  if (!results.length || !visible) {\n    return null;\n  }\n\n  const list = {\n    visible: {\n      opacity: 1,\n      transition: {\n        when: \"beforeChildren\",\n        staggerChildren: 0.05\n      }\n    },\n    hidden: {\n      opacity: 0,\n      transition: {\n        when: \"afterChildren\"\n      }\n    }\n  };\n  const item = {\n    visible: {\n      opacity: 1,\n      x: 0\n    },\n    hidden: {\n      opacity: 0,\n      x: 50\n    }\n  };\n  return React.createElement(motion.div, {\n    initial: \"hidden\",\n    animate: \"visible\",\n    exit: \"hidden\",\n    variants: list,\n    className: \"w-full absolute mt-3 py-2 flex flex-col shadow-xl rounded-lg bg-white\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, results.slice(0, 3).map((result, index) => {\n    const parts = result.title.split(new RegExp(\"(\".concat(escapeRegExp(query), \")\"), \"gi\"));\n    return React.createElement(motion.li, {\n      variants: item,\n      className: \"text-base text-gray-400 font-bold px-3 py-2\",\n      key: uid(result, index),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: result.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, parts.map((part, i) => React.createElement(\"span\", {\n      key: i,\n      className: part.toLowerCase() === query.toLowerCase() ? \"text-gray-600\" : undefined,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, part))));\n  })));\n}\n\nfunction SearchInput({\n  onFocusChange,\n  onChange,\n  query,\n  shouldAutoFocus\n}) {\n  const history = useHistory();\n\n  function handleChange(e) {\n    onChange(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    if (query) {\n      history.push(\"/search?q=\".concat(query));\n    }\n  }\n\n  function handleFocus() {\n    onFocusChange(true);\n  }\n\n  return React.createElement(\"form\", {\n    className: \"flex shadow rounded-lg\",\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    autoFocus: shouldAutoFocus,\n    className: \"block text font-light text-gray-700 placeholder-gray-400 p-3 bg-white w-full rounded-l-lg\",\n    type: \"search\",\n    onFocus: handleFocus,\n    onChange: handleChange,\n    placeholder: \"Ex. CSC309, Introduction to Computer Networks\",\n    value: query,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"text font-medium uppercase text-white bg-blue-500 py-3 px-5 rounded-r-lg\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, \"Search\"));\n}\n\nfunction CourseSearchBar({\n  initialValue = \"\",\n  shouldAutoFocus = false\n}) {\n  const ref = useRef();\n\n  const _useState = useState(shouldAutoFocus),\n        _useState2 = _slicedToArray(_useState, 2),\n        hasFocus = _useState2[0],\n        setHasFocus = _useState2[1];\n\n  const _useState3 = useState(initialValue),\n        _useState4 = _slicedToArray(_useState3, 2),\n        query = _useState4[0],\n        setQuery = _useState4[1];\n\n  const debouncedQuery = useDebounce(query, 300);\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        results = _useState6[0],\n        setResults = _useState6[1];\n\n  useOnClickOutside(ref, () => setHasFocus(false));\n  useEffect(() => {\n    if (debouncedQuery) {\n      // Replace with real network request\n      setTimeout(() => {\n        const staticResults = [{\n          url: \"/course/csc309\",\n          title: \"CSC309 - Programming on the Web\"\n        }, {\n          url: \"/course/csc301\",\n          title: \"CSC301 - Introduction to Software Engineering\"\n        }, {\n          url: \"/course/csc300\",\n          title: \"CSC300 - Computers and Society\"\n        }];\n        setResults(staticResults);\n      }, 750);\n    } else {\n      setResults([]);\n    }\n  }, [debouncedQuery]);\n  return React.createElement(\"div\", {\n    className: \"relative\",\n    ref: ref,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(SearchInput, {\n    onFocusChange: setHasFocus,\n    onChange: setQuery,\n    query: query,\n    shouldAutoFocus: shouldAutoFocus,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }), React.createElement(SearchResults, {\n    visible: hasFocus,\n    query: query,\n    results: results,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }));\n}\n\nCourseSearchBar.propTypes = {\n  shouldAutoFocus: PropTypes.bool,\n  initialValue: PropTypes.string\n};\nexport default CourseSearchBar;","map":{"version":3,"sources":["C:/Users/KaRjn/Desktop/CSC309/team51/frontend/src/components/CourseSearchBar.js"],"names":["PropTypes","escapeRegExp","Link","motion","React","useState","useEffect","useRef","uid","useHistory","useDebounce","useOnClickOutside","SearchResults","query","results","visible","length","list","opacity","transition","when","staggerChildren","hidden","item","x","slice","map","result","index","parts","title","split","RegExp","url","part","i","toLowerCase","undefined","SearchInput","onFocusChange","onChange","shouldAutoFocus","history","handleChange","e","target","value","handleSubmit","preventDefault","push","handleFocus","CourseSearchBar","initialValue","ref","hasFocus","setHasFocus","setQuery","debouncedQuery","setResults","setTimeout","staticResults","propTypes","bool","string"],"mappings":"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","sourcesContent":["import PropTypes from \"prop-types\";\r\nimport { escapeRegExp } from \"lodash\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { uid } from \"react-uid\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport useDebounce from \"../utils/useDebounce\";\r\nimport useOnClickOutside from \"../utils/useOnClickOutside\";\r\n\r\nfunction SearchResults({ query, results, visible }) {\r\n  if (!results.length || !visible) {\r\n    return null;\r\n  }\r\n\r\n  const list = {\r\n    visible: {\r\n      opacity: 1,\r\n      transition: {\r\n        when: \"beforeChildren\",\r\n        staggerChildren: 0.05\r\n      }\r\n    },\r\n    hidden: {\r\n      opacity: 0,\r\n      transition: {\r\n        when: \"afterChildren\"\r\n      }\r\n    }\r\n  };\r\n\r\n  const item = {\r\n    visible: { opacity: 1, x: 0 },\r\n    hidden: { opacity: 0, x: 50 }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial=\"hidden\"\r\n      animate=\"visible\"\r\n      exit=\"hidden\"\r\n      variants={list}\r\n      className=\"w-full absolute mt-3 py-2 flex flex-col shadow-xl rounded-lg bg-white\"\r\n    >\r\n      <ul>\r\n        {results.slice(0, 3).map((result, index) => {\r\n          const parts = result.title.split(\r\n            new RegExp(`(${escapeRegExp(query)})`, \"gi\")\r\n          );\r\n          return (\r\n            <motion.li\r\n              variants={item}\r\n              className=\"text-base text-gray-400 font-bold px-3 py-2\"\r\n              key={uid(result, index)}\r\n            >\r\n              <Link to={result.url}>\r\n                {parts.map((part, i) => (\r\n                  <span\r\n                    key={i}\r\n                    className={\r\n                      part.toLowerCase() === query.toLowerCase()\r\n                        ? \"text-gray-600\"\r\n                        : undefined\r\n                    }\r\n                  >\r\n                    {part}\r\n                  </span>\r\n                ))}\r\n              </Link>\r\n            </motion.li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </motion.div>\r\n  );\r\n}\r\n\r\nfunction SearchInput({ onFocusChange, onChange, query, shouldAutoFocus }) {\r\n  const history = useHistory();\r\n\r\n  function handleChange(e) {\r\n    onChange(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    if (query) {\r\n      history.push(`/search?q=${query}`);\r\n    }\r\n  }\r\n\r\n  function handleFocus() {\r\n    onFocusChange(true);\r\n  }\r\n\r\n  return (\r\n    <form className=\"flex shadow rounded-lg\" onSubmit={handleSubmit}>\r\n      <input\r\n        autoFocus={shouldAutoFocus}\r\n        className=\"block text font-light text-gray-700 placeholder-gray-400 p-3 bg-white w-full rounded-l-lg\"\r\n        type=\"search\"\r\n        onFocus={handleFocus}\r\n        onChange={handleChange}\r\n        placeholder=\"Ex. CSC309, Introduction to Computer Networks\"\r\n        value={query}\r\n      />\r\n      <button className=\"text font-medium uppercase text-white bg-blue-500 py-3 px-5 rounded-r-lg\">\r\n        Search\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nfunction CourseSearchBar({ initialValue = \"\", shouldAutoFocus = false }) {\r\n  const ref = useRef();\r\n  const [hasFocus, setHasFocus] = useState(shouldAutoFocus);\r\n  const [query, setQuery] = useState(initialValue);\r\n  const debouncedQuery = useDebounce(query, 300);\r\n  const [results, setResults] = useState([]);\r\n\r\n  useOnClickOutside(ref, () => setHasFocus(false));\r\n\r\n  useEffect(() => {\r\n    if (debouncedQuery) {\r\n      // Replace with real network request\r\n      setTimeout(() => {\r\n        const staticResults = [\r\n          { url: \"/course/csc309\", title: \"CSC309 - Programming on the Web\" },\r\n          {\r\n            url: \"/course/csc301\",\r\n            title: \"CSC301 - Introduction to Software Engineering\"\r\n          },\r\n          { url: \"/course/csc300\", title: \"CSC300 - Computers and Society\" }\r\n        ];\r\n        setResults(staticResults);\r\n      }, 750);\r\n    } else {\r\n      setResults([]);\r\n    }\r\n  }, [debouncedQuery]);\r\n\r\n  return (\r\n    <div className=\"relative\" ref={ref}>\r\n      <SearchInput\r\n        onFocusChange={setHasFocus}\r\n        onChange={setQuery}\r\n        query={query}\r\n        shouldAutoFocus={shouldAutoFocus}\r\n      />\r\n      <SearchResults visible={hasFocus} query={query} results={results} />\r\n    </div>\r\n  );\r\n}\r\n\r\nCourseSearchBar.propTypes = {\r\n  shouldAutoFocus: PropTypes.bool,\r\n  initialValue: PropTypes.string\r\n};\r\n\r\nexport default CourseSearchBar;\r\n"]},"metadata":{},"sourceType":"module"}